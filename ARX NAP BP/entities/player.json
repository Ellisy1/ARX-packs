{
  "format_version": "1.18.20",
  "minecraft:entity": {
    "description": {
      "identifier": "minecraft:player",
      "is_spawnable": false,
      "is_summonable": false,
      "is_experimental": false,
      "properties": {
        // Размер грузи 
        "arx:bust_size": {
          "type": "int",
          "range": [
            0,
            3
          ],
          "default": 0,
          "client_sync": true
        },
        // Нокнут ли игрок
        "arx:is_knocked": {
          "type": "int",
          "range": [
            0,
            2
          ],
          "default": 0,
          "client_sync": true
        }
      }
    },
    "component_groups": {
      // 0 Уровень, далее +1
      "arx:set_14_hp": {
        "minecraft:health": {
          "value": 14,
          "max": 14
        }
      },
      "arx:set_16_hp": {
        "minecraft:health": {
          "value": 16,
          "max": 16
        }
      },
      "arx:set_18_hp": {
        "minecraft:health": {
          "value": 18,
          "max": 18
        }
      },
      "arx:set_20_hp": {
        "minecraft:health": {
          "value": 20,
          "max": 20
        }
      },
      "arx:set_22_hp": {
        "minecraft:health": {
          "value": 22,
          "max": 22
        }
      },
      "arx:set_24_hp": {
        "minecraft:health": {
          "value": 24,
          "max": 24
        }
      },
      "arx:set_26_hp": {
        "minecraft:health": {
          "value": 26,
          "max": 26
        }
      },
      "arx:set_28_hp": {
        "minecraft:health": {
          "value": 28,
          "max": 28
        }
      },
      "arx:set_30_hp": {
        "minecraft:health": {
          "value": 30,
          "max": 30
        }
      },
      "arx:set_32_hp": {
        "minecraft:health": {
          "value": 32,
          "max": 32
        }
      },
      "arx:set_34_hp": {
        "minecraft:health": {
          "value": 34,
          "max": 34
        }
      },
      "arx:set_36_hp": {
        "minecraft:health": {
          "value": 36,
          "max": 36
        }
      },
      "arx:set_38_hp": {
        "minecraft:health": {
          "value": 38,
          "max": 38
        }
      },
      "arx:set_40_hp": {
        "minecraft:health": {
          "value": 40,
          "max": 40
        }
      },
      "arx:set_5_base_dmg": {
        "minecraft:attack": {
          "damage": 5
        }
      },
      "arx:set_0_base_dmg": {
        "minecraft:attack": {
          "damage": 0
        }
      },
      "arx:scale_curse_add": {
        "minecraft:scale": {
          "value": 0.5
        }
      },
      "arx:scale_curse_remove": {
        "minecraft:scale": {
          "value": 1
        }
      },
      "arx:return_default_family_data": {
        "minecraft:type_family": {
          "family": [
            "player",
            "dangerous"
          ]
        }
      },
      "arx:set_knocked_family_data": {
        "minecraft:type_family": {
          "family": [
            "player",
            "is_knocked"
          ]
        }
      }
    },
    "components": {
      "minecraft:health": {
        "value": 20,
        "max": 20
      },
      "minecraft:scale": {
        "value": 1
      },
      "minecraft:experience_reward": {
        "on_death": "(query.player_level + 1) * (7 + query.player_level * 2) / 2"
      },
      "minecraft:type_family": {
        "family": [
          "player",
          "dangerous"
        ]
      },
      "minecraft:is_hidden_when_invisible": {},
      "minecraft:loot": {
        "table": "loot_tables/empty.json"
      },
      "minecraft:collision_box": {
        "width": 0.6,
        "height": 1.8
      },
      "minecraft:can_climb": {},
      "minecraft:movement": {
        "value": 0.1
      },
      "minecraft:hurt_on_condition": {
        "damage_conditions": [
          {
            "filters": {
              "test": "in_lava",
              "subject": "self",
              "operator": "==",
              "value": true
            },
            "cause": "lava",
            "damage_per_tick": 8
          }
        ]
      },
      "minecraft:attack": {
        "damage": 0
      },
      "minecraft:exhaustion_values": {
        "heal": 6,
        "jump": 0.05,
        "sprint_jump": 0.2,
        "mine": 0.005,
        "attack": 0.1,
        "damage": 0.1,
        "walk": 0.0,
        "sprint": 0.1,
        "swim": 0.01
      },
      "minecraft:player.saturation": {
        "value": 5,
        "max": 20
      },
      "minecraft:player.exhaustion": {
        "value": 0,
        "max": 20
      },
      "minecraft:player.level": {
        "value": 0,
        "max": 24791
      },
      "minecraft:player.experience": {
        "value": 0,
        "max": 1
      },
      "minecraft:breathable": {
        "total_supply": 15,
        "suffocate_time": -1,
        "inhale_time": 3.75,
        "generates_bubbles": true
      },
      "minecraft:nameable": {
        "always_show": false,
        "allow_name_tag_renaming": false
      },
      "minecraft:physics": {
        "push_towards_closest_space": true
      },
      "minecraft:pushable": {
        "is_pushable": false,
        "is_pushable_by_piston": true
      },
      "minecraft:insomnia": {
        "days_until_insomnia": 3
      },
      "minecraft:rideable": {
        "seat_count": 2,
        "family_types": [
          "parrot_tame"
        ],
        "pull_in_entities": true,
        "seats": [
          {
            "position": [
              0.4,
              -0.2,
              -0.1
            ],
            "min_rider_count": 0,
            "max_rider_count": 0,
            "lock_rider_rotation": 0
          },
          {
            "position": [
              -0.4,
              -0.2,
              -0.1
            ],
            "min_rider_count": 1,
            "max_rider_count": 2,
            "lock_rider_rotation": 0
          }
        ]
      },
      "minecraft:conditional_bandwidth_optimization": {},
      "minecraft:block_climber": {},
      //Компонент damage_sensor проходит по очереди по каждому триггеру. Может активироваться только один эвент
      "minecraft:damage_sensor": {
        "triggers": [
          {
            "cause": "fall",
            "deals_damage": true,
            "on_damage": {
              "event": "arx:damaged_by_falling"
            }
          },
          {
            "cause": "starve",
            "deals_damage": true,
            "on_damage": {
              "event": "arx:damaged_without_blood"
            }
          },
          {
            "on_damage": {
              "event": "arx:on_get_damage"
            }
          }
        ]
      },
      "minecraft:on_death": {
        "event": "arx:on_death"
      }
    },
    "events": {
      "arx:damaged_by_falling": {
        "run_command": {
          "command": [
            "event entity @s arx:on_get_damage",
            "tag @s[hasitem={item=arx:amul_steel_bone, location=slot.armor.legs}] add has_amul_steel_bone",
            "scoreboard players set @s[tag=!has_amul_steel_bone, scores={custom_random=0..10}] ill_broken_leg 72000",
            "tag @s remove has_amul_steel_bone"
          ]
        }
      },
      "arx:damaged_without_blood": {
        "run_command": {
          "command": [
            "tag @s add damaged_without_blood",
            "event entity @s arx:on_get_damage"
          ]
        }
      },
      "arx:on_death": {
        "run_command": {
          "command": [
            "summon arx:grave ~ ~1.5 ~",
            "function knockout"
          ]
        }
      },
      "arx:set_14_hp": {
        "add": {
          "component_groups": [
            "arx:set_14_hp"
          ]
        }
      },
      "arx:set_16_hp": {
        "add": {
          "component_groups": [
            "arx:set_16_hp"
          ]
        }
      },
      "arx:set_18_hp": {
        "add": {
          "component_groups": [
            "arx:set_18_hp"
          ]
        }
      },
      "arx:set_20_hp": {
        "add": {
          "component_groups": [
            "arx:set_20_hp"
          ]
        }
      },
      "arx:set_22_hp": {
        "add": {
          "component_groups": [
            "arx:set_22_hp"
          ]
        }
      },
      "arx:set_24_hp": {
        "add": {
          "component_groups": [
            "arx:set_24_hp"
          ]
        }
      },
      "arx:set_26_hp": {
        "add": {
          "component_groups": [
            "arx:set_26_hp"
          ]
        }
      },
      "arx:set_28_hp": {
        "add": {
          "component_groups": [
            "arx:set_28_hp"
          ]
        }
      },
      "arx:set_30_hp": {
        "add": {
          "component_groups": [
            "arx:set_30_hp"
          ]
        }
      },
      "arx:set_32_hp": {
        "add": {
          "component_groups": [
            "arx:set_32_hp"
          ]
        }
      },
      "arx:set_34_hp": {
        "add": {
          "component_groups": [
            "arx:set_34_hp"
          ]
        }
      },
      "arx:set_36_hp": {
        "add": {
          "component_groups": [
            "arx:set_36_hp"
          ]
        }
      },
      "arx:set_38_hp": {
        "add": {
          "component_groups": [
            "arx:set_38_hp"
          ]
        }
      },
      "arx:set_40_hp": {
        "add": {
          "component_groups": [
            "arx:set_40_hp"
          ]
        }
      },
      "arx:scale_curse_add": {
        "add": {
          "component_groups": [
            "arx:scale_curse_add"
          ]
        }
      },
      "arx:scale_curse_remove": {
        "add": {
          "component_groups": [
            "arx:scale_curse_remove"
          ]
        }
      },
      "arx:become_ghost": {
        "add": {
          "component_groups": [
            "arx:become_ghost"
          ]
        }
      },
      "arx:set_5_base_dmg": {
        "add": {
          "component_groups": [
            "arx:set_5_base_dmg"
          ]
        }
      },
      "arx:set_0_base_dmg": {
        "add": {
          "component_groups": [
            "arx:set_0_base_dmg"
          ]
        }
      },
      "arx:return_default_family_data": {
        "add": {
          "component_groups": [
            "arx:return_default_family_data"
          ]
        }
      },
      "arx:on_get_damage": {
        "run_command": {
          "command": [
            "execute if entity @s[scores={on_hurt_delay=0}] run function on_get_damage"
          ]
        }
      },
      "arx:test_standing": {
        "sequence": [
          {
            "filters": {
              "test": "is_moving",
              "subject": "self",
              "operator": "equals",
              "value": true
            },
            "run_command": {
              "command": [
                "tag @s add is_moving"
              ]
            }
          }
        ]
      },
      "arx:test_in_water": {
        "sequence": [
          {
            "filters": {
              "test": "in_water_or_rain",
              "subject": "self",
              "operator": "equals",
              "value": true
            },
            "run_command": {
              "command": [
                "tag @s add in_water"
              ]
            }
          }
        ]
      },
      "arx:test_in_block_water": {
        "sequence": [
          {
            "filters": {
              "test": "in_water",
              "subject": "self",
              "operator": "equals",
              "value": true
            },
            "run_command": {
              "command": [
                "tag @s add in_block_water"
              ]
            }
          }
        ]
      },
      "arx:test_in_snow_biome": {
        "sequence": [
          {
            "filters": {
              "test": "is_temperature_type",
              "subject": "self",
              "operator": "equals",
              "value": "cold"
            },
            "run_command": {
              "command": [
                "tag @s add in_snow_biome"
              ]
            }
          }
        ]
      },
      "arx:test_underground": {
        "sequence": [
          {
            "filters": {
              "test": "is_underground",
              "subject": "self",
              "operator": "==",
              "value": true
            },
            "run_command": {
              "command": [
                "tag @s add underground"
              ]
            }
          }
        ]
      },
      "arx:test_brightness_low": {
        "sequence": [
          {
            "filters": {
              "test": "is_brightness",
              "operator": "<=",
              "value": 0.2
            },
            "run_command": {
              "command": [
                "tag @s add low_bright"
              ]
            }
          }
        ]
      },
      "arx:test_brightness_high": {
        "sequence": [
          {
            "filters": {
              "test": "is_brightness",
              "operator": ">=",
              "value": 0.4
            },
            "run_command": {
              "command": [
                "tag @s add high_bright"
              ]
            }
          }
        ]
      },
      "arx:test_hp_low": {
        "sequence": [
          {
            "filters": {
              "test": "actor_health",
              "operator": "<=",
              "value": 10
            },
            "run_command": {
              "command": [
                "tag @s add low_hp"
              ]
            }
          }
        ]
      },
      "arx:test_very_hp_low": {
        "sequence": [
          {
            "filters": {
              "test": "actor_health",
              "operator": "<=",
              "value": 4
            },
            "run_command": {
              "command": [
                "tag @s add very_low_hp",
                "tag @s remove low_hp"
              ]
            }
          }
        ]
      },
      "arx:test_is_dead": {
        "sequence": [
          {
            "filters": {
              "test": "actor_health",
              "operator": "<=",
              "value": 0
            },
            "run_command": {
              "command": [
                "tag @s add is_dead"
              ]
            }
          }
        ]
      },
      "arx:test_is_day": {
        "sequence": [
          {
            "filters": {
              "test": "is_daytime",
              "operator": "equals",
              "value": true
            },
            "run_command": {
              "command": [
                "scoreboard players set @s is_day 1"
              ]
            }
          }
        ]
      },
      "arx:test_in_nether": {
        "sequence": [
          {
            "filters": {
              "test": "in_nether",
              "operator": "equals",
              "value": true
            },
            "run_command": {
              "command": [
                "tag @s add in_nether"
              ]
            }
          }
        ]
      },
      "arx:test_biome_birch": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "birch"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_birch"
              ]
            }
          }
        ]
      },
      "arx:test_biome_jungle": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "jungle"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_jungle"
              ]
            }
          }
        ]
      },
      "arx:test_biome_ocean": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "ocean"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_ocean"
              ]
            }
          }
        ]
      },
      "arx:test_biome_forest": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "forest"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_forest"
              ]
            }
          }
        ]
      },
      "arx:test_biome_desert": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "desert"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_desert"
              ]
            }
          }
        ]
      },
      "arx:test_biome_mesa": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "mesa"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_mesa"
              ]
            }
          }
        ]
      },
      "arx:test_biome_plains": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "plains"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_plains"
              ]
            }
          }
        ]
      },
      "arx:test_biome_savanna": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "savanna"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_savanna"
              ]
            }
          }
        ]
      },
      "arx:test_biome_river": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "river"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_ocean"
              ]
            }
          }
        ]
      },
      "arx:test_biome_swamp": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "swamp"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_swamp"
              ]
            }
          }
        ]
      },
      "arx:test_biome_mangrove_swamp": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "mangrove_swamp"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_mangrove_swamp"
              ]
            }
          }
        ]
      },
      "arx:test_biome_beach": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "beach"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_beach"
              ]
            }
          }
        ]
      },
      "arx:test_biome_mountain": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "mountain"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_mountain"
              ]
            }
          }
        ]
      },
      "arx:test_biome_ice": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "ice"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_ice"
              ]
            }
          }
        ]
      },
      "arx:test_biome_roofed": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "roofed"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_roofed"
              ]
            }
          }
        ]
      },
      "arx:test_biome_taiga": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "taiga"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_taiga"
              ]
            }
          }
        ]
      },
      "arx:test_biome_flower_forest": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "flower_forest"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_forest"
              ]
            }
          }
        ]
      },
      "arx:test_biome_cold": {
        "sequence": [
          {
            "filters": {
              "test": "has_biome_tag",
              "operator": "equals",
              "value": "cold"
            },
            "run_command": {
              "command": [
                "tag @s add BIOME_ice"
              ]
            }
          }
        ]
      },
      "arx:test_sneaking": {
        "sequence": [
          {
            "filters": {
              "test": "is_sneaking",
              "operator": "equals",
              "value": true
            },
            "run_command": {
              "command": [
                "tag @s add is_sneaking"
              ]
            }
          }
        ]
      },
      "arx:test_weather": {
        "sequence": [
          {
            "filters": {
              "test": "weather",
              "operator": "equals",
              "value": "precipitation"
            },
            "run_command": {
              "command": [
                "tag @s add is_raining"
              ]
            }
          }
        ]
      },
      "arx:test_is_riding": {
        "sequence": [
          {
            "filters": {
              "test": "is_riding",
              "operator": "equals",
              "value": true
            },
            "run_command": {
              "command": [
                "tag @s add is_riding"
              ]
            }
          }
        ]
      },
      // PROPERTIES

      // bust size
      "arx:property_bust_size_set_0": { // No bust (for all men and some women)
        "set_property": {
          "arx:bust_size": 0
        }
      },
      "arx:property_bust_size_set_1": { // Small tits (only women)
        "set_property": {
          "arx:bust_size": 1
        }
      },
      "arx:property_bust_size_set_2": { // Common breast (only women)
        "set_property": {
          "arx:bust_size": 2
        }
      },
      "arx:property_bust_size_set_3": { // Oh daddy~~ Big boobs (only women)
        "set_property": {
          "arx:bust_size": 3
        }
      },

      // Knockout
      "arx:property_is_knockout_set_0":{ // Выход из нокаута
        "set_property": {
          "arx:is_knocked": 0
        },
        "queue_command": {
          "command": [
            "scoreboard players set @s respawn_delay 0"
          ]
        },
        "add": {
          "component_groups": [
            "arx:return_default_family_data"
          ]
        }
      },
      "arx:property_is_knockout_set_true":{ // Игрока нокнули
        "set_property": {
          "arx:is_knocked": "math.random_integer(1, 2)"
        },
        "queue_command": {
          "command": [
            "scoreboard players set @s revive_delay 0"
          ]
        },
        "add": {
          "component_groups": [
            "arx:set_knocked_family_data"
          ]
        }
      },
      
      // Фаза луны
      "arx:test_moon_phase": {
        "sequence": [
          {
            "filters": {
              "test": "moon_phase",
              "operator": "==",
              "value": 1
            },
            "run_command": {
              "command": [
                "tag @s add scarlet_night"
              ]
            }
          }
        ]
      }
    }
  }
}