{
  "format_version": "1.16.100",
  "minecraft:item": {
    "description": {
      "identifier": "arx:action_stab",
      "category": "items"
    },
    "components": {
      "minecraft:icon": {
        "texture": "arx:fist_symbol"
      },
      "minecraft:cooldown": {
        "category": "actions",
        "duration": 1
      },
      "minecraft:on_use": {
        "on_use": {
          "event": "on_use_event"
        }
      },
      "tag:is_invisible": {}
    },
    "events": {
      "on_use_event": {
        "run_command": {
          "command": [
            "tag @s add self",
            "execute @p[tag=!self, r=3, hasitem={item=arx:shackles, location=slot.armor.legs}] ~ ~ ~ tag @p[tag=self] add nearest_player_has_shackles",

            "playanimation @s[tag=nearest_player_has_shackles] animation.player.stab",
            "scoreboard players add @p[tag=!self, r=3, hasitem={item=arx:shackles, location=slot.armor.legs}] stress 1000",
            "damage @p[tag=!self, r=3, hasitem={item=arx:shackles, location=slot.armor.legs}] 1 entity_attack entity @s",
            "w @p[tag=!self, r=3, hasitem={item=arx:shackles, location=slot.armor.legs}] §6@p[tag=self] меня больно бьет!",

            "execute @s[tag=!nearest_player_has_shackles] ~ ~ ~ w @s §6Чтобы избить игрока в кандалах, сначала надо подойти к нему.",

            "tag @s remove nearest_player_has_shackles",
            "tag @s remove self"
          ]
        }
      }
    }
  }
}